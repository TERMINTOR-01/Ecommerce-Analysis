# Ecommerce-Analysis
This repository contains a collection of SQL queries categorized into Basic, Intermediate, and Advanced levels. These queries are designed for analyzing customer data, order trends, and sales performance. Below is a detailed description of the queries, their purpose, and usage.

********************************************************************Basic Queries********************************************************************

List all unique cities where customers are located

Purpose: To identify all distinct cities where the customers reside.

Query: Uses DISTINCT on the customer city column to filter unique values.

Count the number of orders placed in 2017

Purpose: To determine the volume of orders placed during the year 2017.

Query: Filters orders using a WHERE clause on the order date column.

Find the total sales per category

Purpose: To calculate the total revenue generated for each product category.

Query: Aggregates payment values grouped by product category.

Calculate the percentage of orders that were paid in installments

Purpose: To analyze the payment method preferences of customers.

Query: Calculates the ratio of installment-based orders to total orders.

Count the number of customers from each state

Purpose: To determine customer distribution across states.

Query: Groups customers by state and counts the number of occurrences.

Basic Queries

List all unique cities where customers are located

Purpose: To identify all distinct cities where the customers reside.

Query: Uses DISTINCT on the customer city column to filter unique values.

Count the number of orders placed in 2017

Purpose: To determine the volume of orders placed during the year 2017.

Query: Filters orders using a WHERE clause on the order date column.

Find the total sales per category

Purpose: To calculate the total revenue generated for each product category.

Query: Aggregates payment values grouped by product category.

Calculate the percentage of orders that were paid in installments

Purpose: To analyze the payment method preferences of customers.

Query: Calculates the ratio of installment-based orders to total orders.

Count the number of customers from each state

Purpose: To determine customer distribution across states.

Query: Groups customers by state and counts the number of occurrences.

*****************************************************************Intermediate Queries******************************************************************

Calculate the number of orders per month in 2018

Purpose: To track order trends over the months in 2018.

Query: Filters orders by year and groups them by month.

Find the average number of products per order, grouped by customer city

Purpose: To measure customer purchasing patterns in different cities.

Query: Joins orders and order items, grouping by customer city.

Calculate the percentage of total revenue contributed by each product category

Purpose: To understand the revenue contribution of each category.

Query: Aggregates sales for each category and calculates percentages.

Identify the correlation between product price and the number of times a product has been purchased

Purpose: To examine the relationship between price and demand.

Query: Uses aggregate functions and correlation analysis techniques.

Calculate the total revenue generated by each seller, and rank them by revenue

Purpose: To identify top-performing sellers based on revenue.

Query: Aggregates revenue by seller and uses a ranking function.

*************************************************************Advanced Queries**************************************************************

Calculate the moving average of order values for each customer over their order history

Purpose: To identify spending trends of individual customers.

Query: Uses window functions for calculating moving averages.

Calculate the cumulative sales per month for each year

Purpose: To track the cumulative revenue growth over time.

Query: Aggregates sales monthly and calculates running totals.

Calculate the year-over-year growth rate of total sales

Purpose: To measure sales growth between consecutive years.

Query: Uses lag functions and percentage change calculations.

Calculate the retention rate of customers, defined as the percentage of customers who make another purchase within 6 months of their first purchase

Purpose: To analyze customer loyalty and retention.

Query: Identifies first orders and subsequent orders within 6 months.

Identify the top 3 customers who spent the most money in each year

Purpose: To recognize high-value customers.

Query: Aggregates spending per customer per year and ranks them.

Database Schema Assumptions

The queries assume the following tables and columns:

customers: customer_id, customer_city, customer_state

orders: order_id, customer_id, order_purchase_timestamp

order_items: order_id, product_id, price, seller_id

products: product_id, product_category

payments: order_id, payment_type, payment_value
